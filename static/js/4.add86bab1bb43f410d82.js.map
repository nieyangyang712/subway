{"version":3,"sources":["webpack:///static/js/4.add86bab1bb43f410d82.js","webpack:///./src/views/train.vue","webpack:///./~/babel-runtime/core-js/json/stringify.js?4574**","webpack:///./~/core-js/library/fn/json/stringify.js?6708**","webpack:///train.vue","webpack:///./src/views/train.vue?1544","webpack:///./src/views/train.vue?6a7a","webpack:///./src/views/train.vue?2d06"],"names":["webpackJsonp","250","module","exports","__webpack_require__","injectStyle","ssrContext","Component","252","default","__esModule","254","core","$JSON","JSON","stringify","it","apply","arguments","281","__webpack_exports__","Object","defineProperty","value","$","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","data","draw","group","path","panZoomTiger","selectedPoints","s_cx","s_cy","e_cx","e_cy","methods","drawLine","lines","this","$svg","size","addClass","i","length","_lines$i","l_xmlattr","p","lb","loop","uid","dStr","isLb","j","_p$j$p_xmlattr","p_xmlattr","x","y","st","ex","rc","lc","lbx","lby","lineColor","split","text","move","font","fill","family","stroke","color","width","linecap","linejoin","repeatStr","_lines$i2","_p$j$p_xmlattr2","rx","ry","includes","image","attr","name","mouseover","circle","anchor","drag","enablePan","enableZoom","select_circle","_this","disablePan","disableZoom","css","cursor","mousedown","e","transformValueStr","substring","scale_x","scale_y","translate_x","translate_y","s_x","offsetX","s_y","offsetY","ellipse","add","mousemove","m_x","m_y","Math","abs","cx","cy","mouseup","e_x","e_y","off","console","log","getAttribute","points","pointsHtml","push","s_name","type","tansHtml","circle_cx","circle_cy","circle_rx","map","v","a","b","d","sqrt","init","lineData","_this2","localStorage","getItem","parse","timeStamp","random","toFixed","checkUrl","getScript","BMapSub","_rd","json","subways","l","setItem","created","destroyed","destroy","computed","mounted","_this3","svgPanZoom","fit","window","onresize","resize","center","call","293","version","sources","names","mappings","file","sourcesContent","sourceRoot","306","content","locals","318","render","_vm","_h","$createElement","_c","_self","staticStyle","height","_v","margin-top","margin-bottom","attrs","gutter","span","on","click","staticClass","id","staticRenderFns"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAASC,GCHjC,QAAAC,GAAAC,GACAF,EAAA,KAEA,GAAAG,GAAAH,EAAA,GAEAA,EAAA,KAEAA,EAAA,KAEAC,EAEA,kBAEA,KAGAH,GAAAC,QAAAI,EAAAJ,SDUMK,IACA,SAAUN,EAAQC,EAASC,GE3BjCF,EAAAC,SAAkBM,QAAAL,EAAA,KAAAM,YAAA,IFiCZC,IACA,SAAUT,EAAQC,EAASC,GGlCjC,GAAAQ,GAAAR,EAAA,GACAS,EAAAD,EAAAE,OAAAF,EAAAE,MAAuCC,UAAAD,KAAAC,WACvCb,GAAAC,QAAA,SAAAa,GACA,MAAAH,GAAAE,UAAAE,MAAAJ,EAAAK,aH0CMC,IACA,SAAUjB,EAAQkB,EAAqBhB,GAE7C,YACAiB,QAAOC,eAAeF,EAAqB,cAAgBG,OAAO,IACtC,SAASC,GAAyB,GAAIC,GAAqErB,EAAoB,KAClIsB,EAA6EtB,EAAoBuB,EAAEF,EI3B5HL,GAAA,SJkCEQ,KAAM,WACJ,OACEC,KIhCN,KJiCMC,MIhCN,KJiCMC,KIhCN,KJiCMC,aIhCN,KJiCMC,eIhCN,KJiCMC,KIhCN,KJiCMC,KIhCN,KJiCMC,KIhCN,KJiCMC,KI/BN,OJmCEC,SACEC,SAAU,SAAkBC,GAC1BC,KAAKZ,KAAOY,KAAKC,KI/BvB,cAAAC,KAAA,KACA,KAAAC,SAEA,SJ8BM,IAAId,GAAQW,KAAKZ,KI7BvBC,OJ8BMW,MAAKX,MI7BXA,CJ8BM,KAAK,GAAIe,GAAI,EAAGA,EAAIL,EAAMM,OAAQD,IAAK,CAUrC,IAAK,GIvCbE,GAAAP,EACAK,GJ8BYG,EAAYD,EAASC,UACrBC,EAAIF,EAASE,EACbC,EI/BZF,EAAAE,GJgCYC,EAAOH,EAAUG,KACjBC,EAAMJ,EAAUI,IAEhBC,EIlCZ,GJmCYC,GIlCZ,EJmCiBC,EAAI,EAAGA,EAAIN,EAAEH,OAAQS,IAAK,CIjC3C,GAAAC,GAAAP,EAAAM,GAEAE,UJiCcC,EAAIF,EAAeE,EACnBC,EAAIH,EAAeG,EACnBT,EAAKM,EAAeN,GACpBU,EAAKJ,EAAeI,GACpBC,EAAKL,EAAeK,GACpBC,EAAKN,EAAeM,EAGpBR,IACFA,GIxCZ,EJyCYD,GAAQK,EAAI,IAAMC,EIxC9B,KJ0CgBG,GACFR,GIxCd,EJyCcD,GAAQ,IAAMK,EAAI,IAAMC,EIxCtC,MJ2CgBN,GADO,GAALE,EACM,IAAMG,EAAI,IAAMC,EIxCxC,IJ0CwB,IAAMD,EAAI,IAAMC,EIxCxC,IJ0CkBJ,GAAKN,EAAEH,OAAS,GACdK,IACFE,GIxClB,MJ8CQ,GAAIH,GItCZF,EAAAE,GJuCYa,EAAKf,EAAUe,GACfC,EAAMhB,EAAUgB,IAChBC,EAAMjB,EAAUiB,IAEhBC,EAAY,IAAMH,EAAGI,MAAM,KI1CvC,EJ2CwBrC,GAAMsC,KI1C9BlB,GACAmB,KAAAL,EAAA,GAAAC,EACA,IAAAK,MAAAC,KAAAL,EAAAM,OACA,gBAAA5B,SAGA,YJuCQ,IAAIb,GAAOD,EAAMC,KItCzBsB,EJuCQZ,MAAKV,KItCbA,EJuCQA,EAAKwC,KItCb,QJuCQxC,EAAK0C,QACHC,MItCVR,EJuCUS,MItCV,EJuCUC,QItCV,QJuCUC,SIlCV,UJuCM,IAAK,GADDC,GIlCV,GJmCejC,EAAI,EAAGA,EAAIL,EAAMM,OAAQD,IAAK,CIlC7C,GAAAkC,GAAAvC,EAEAK,GJkCYG,EAAY+B,EAAU/B,UACtBC,EAAI8B,EAAU9B,CAGlB,KAAKD,EAAUI,IInCvB,KJsCQ,KAAK,GAAIG,GAAI,EAAGA,EAAIN,EAAEH,OAAQS,IAAK,CIlC3C,GAAAyB,GAAA/B,EAAAM,GAEAE,UJkCcC,EAAIsB,EAAgBtB,EACpBC,EAAIqB,EAAgBrB,EACpBsB,EAAKD,EAAgBC,GACrBC,EAAKF,EAAgBE,GACrBhC,EAAK8B,EAAgB9B,GACrBW,EAAKmB,EAAgBnB,GACrBC,EAAKkB,EAAgBlB,GACrBF,EAAKoB,EAAgBpB,GACrBR,EAAM4B,EAAgB5B,GAG1B,IAAIQ,EI5Cd,CJ6CY,GAAIC,GACF,IAAKiB,EAAUK,SAAS/B,GI3CtC,CJ4CgB,GAAIgC,GI3CpBtD,EAAAsD,MApGA,kmHAqGAC,MAAAC,KACApC,IAAAN,SACA,QACAwC,GAAAzC,KAAA,GACA,IAAA0B,KAAAX,EAAA,EAAAC,EACA,GAAA4B,UAAA,mBJyCc,CI/BdzD,EAAA0D,OACA,GAAAjB,KACA,QAAAE,QAAAC,MAAA,IAAA1B,EAAAe,GAAAI,MAAA,KACA,KAAAvB,SACA,SAAAyB,KAAAX,EAAA,EAAAC,EACA,GAAA0B,MAAAC,KACApC,IJ4BY,IAAK4B,EAAUK,SAAS/B,GIxBpC,CJyBiCtB,EAAMsC,KIxBvClB,GACAmB,KAAAX,EAAAuB,EAAA,EAAAtB,EAAAuB,EACA,GAAAZ,MJwBgBE,OIrBhB,KJsBgB7B,KIrBhB,GJsBgB8C,OIlBhB,UANA7C,SAQA,gBJmBckC,GIlBd1B,OJwBIsC,KAAM,WACJjD,KAAKT,aIjBX2D,YJkBMlD,KAAKT,aIjBX4D,cJmBIC,cAAe,WIhBnB,GAAAC,GAAArD,IJmBMA,MAAKT,aIlBX+D,aJmBMtD,KAAKT,aIjBXgE,aJmBM,IIlBNR,EJmBMhE,GAAE,eAAeyE,KAAMC,OIjB7B,cJmBMzD,KAAKZ,KAAKsE,UAAU,SAAUC,GAC5B,GAAIC,GAAoBP,EIhBhChE,MAAAuD,KACA,aAAAiB,UAAA,EAAAR,EAAAhE,MAAAuD,KAAA,aAAAvC,OACA,GJeYyD,EAAUF,EAAkBlC,MAAM,KId9C,GJeYqC,EAAUH,EAAkBlC,MAAM,KId9C,GJeYsC,EAAcJ,EAAkBlC,MAAM,KIdlD,GJeYuC,EAAcL,EAAkBlC,MAAM,KIblD,EJeQ2B,GAAMa,KAAOP,EAAEQ,QAAUH,GIdjCF,EJeQT,EAAMe,KAAOT,EAAEU,QAAUJ,GIXjCF,EJaQhB,EAASM,EIZjBjE,KAAAkF,QAAA,GACA,IAAAxC,KACA,eAAAE,QAAAC,MACA,SAAA9B,SACA,iBAAAyB,KAAAyB,EAAAa,IAAA,GAAAb,EAAAe,IAEA,IJQQf,EAAMhE,MAAMkF,IINpBxB,GJQQM,EAAMjE,KAAKoF,UAAU,SAAUb,GAC7B,GAAIC,GAAoBP,EIPlChE,MAAAuD,KACA,aAAAiB,UAAA,EAAAR,EAAAhE,MAAAuD,KAAA,aAAAvC,OACA,GJMcyD,EAAUF,EAAkBlC,MAAM,KILhD,GJMcqC,EAAUH,EAAkBlC,MAAM,KILhD,GJMcsC,EAAcJ,EAAkBlC,MAAM,KILpD,GJMcuC,EAAcL,EAAkBlC,MAAM,KIJpD,EJMU2B,GAAMoB,KAAOd,EAAEQ,QAAUH,GILnCF,EJMUT,EAAMqB,KAAOf,EAAEU,QAAUJ,GIJnCF,EJMUhF,EIJV,kBJMUgE,EAAOH,MACLJ,GAAImC,KAAKC,IAAIvB,EAAMoB,IAAMpB,EAAMa,KIL3C,EJMYzB,GAAIkC,KAAKC,IAAIvB,EAAMqB,IAAMrB,EAAMe,KIL3C,EJMYS,GAAIxB,EAAMoB,IILtB,GJMYK,GAAIzB,EAAMqB,IIHtB,KJMUrB,EAAMjE,KAAK2F,QAAQ,SAAUpB,GAC3B,GAAIC,GAAoBP,EILpChE,MAAAuD,KACA,aAAAiB,UAAA,EAAAR,EAAAhE,MAAAuD,KAAA,aAAAvC,OACA,GJIgByD,EAAUF,EAAkBlC,MAAM,KIHlD,GJIgBqC,EAAUH,EAAkBlC,MAAM,KIHlD,GJIgBsC,EAAcJ,EAAkBlC,MAAM,KIHtD,GJIgBuC,EAAcL,EAAkBlC,MAAM,KIFtD,EJIY2B,GAAM2B,KAAOrB,EAAEQ,QAAUH,GIHrCF,EJIYT,EAAM4B,KAAOtB,EAAEU,QAAUJ,GIFrCF,EJIYhB,EAAOH,MACLJ,GAAImC,KAAKC,IAAIvB,EAAM2B,IAAM3B,EAAMa,KIH7C,EJIczB,GAAIkC,KAAKC,IAAIvB,EAAM2B,IAAM3B,EAAMa,KIH7C,EJIcW,GAAIxB,EAAM2B,IIHxB,GJIcF,GAAIzB,EAAM4B,IIAxB,KJGY5B,EAAMjE,KIDlB8F,MJGYnG,EAAE,eAAeyE,KAAMC,OIDnC,YJGY0B,QAAQC,IAAIrC,EAAOH,OAAQ7D,EAAE,UAAU,GAAGsG,aIFtD,MJMY,KAAK,GAHDC,MAEAC,EAAaxG,EIF7B,UJGqBqB,EAAI,EAAGA,EAAImF,EAAWlF,OAAQD,IACrCkF,EAAOE,MACLX,GAAIU,EAAWnF,GAAGiF,aIFlC,MJGgBP,GAAIS,EAAWnF,GAAGiF,aIFlC,MJGgBI,OAAQF,EAAWnF,GAAGiF,aIFtC,QJGgBK,KIDhB,SJMY,KAAK,GADDC,GAAW5G,EID3B,UJEqBqB,EAAI,EAAGA,EAAIuF,EAAStF,OAAQD,IACnCkF,EAAOE,MACLX,GAAIc,EAASvF,GAAGiF,aIDhC,KJEgBP,GAAIa,EAASvF,GAAGiF,aIDhC,KJEgBI,OAAQE,EAASvF,GAAGiF,aIDpC,QJEgBK,KIAhB,SJGYP,SAAQC,IIEpBE,EJAY,IAAIM,GAAY7C,EAAOH,KICnC,MJAgBiD,EAAY9C,EAAOH,KICnC,MJAgBkD,EAAY/C,EAAOH,KICnC,MJAgBkD,EAAY/C,EAAOH,KICnC,KJAYS,GAAM7D,kBACN8F,EAAOS,IAAI,SAAUC,GACnB,GICdC,IAAAD,EAAAnB,GAAAe,IAAAI,EAAAnB,GACAe,IAAAI,EAAAlB,GAAAe,IAAAG,EAAAlB,GACAe,GACAK,MAAA,EJDgBA,GADa,UAAXF,EAAEN,KACAI,EIGpB,EAEAA,CJDc,IAAIK,GAAIxB,KAAKyB,KAAKH,GIGhCC,CJFkBC,IAAK,IACPhB,QAAQC,IIGxBe,GJFgBhB,QAAQC,IAAIY,EIG5BP,kBJIIY,KAAM,WIGV,GAIAC,GAJAC,EAAAvG,IJIM,IAAIwG,aAAaC,QAAQ,UACvBH,EAAWjI,KAAKqI,MAAMF,aAAaC,QIC3C,WJAQzG,KAAKF,SICbwG,OACA,CJAQ,GAAIK,IAA6B,IAAhBhC,KAAKiC,UAAmBC,QICjD,GACAC,EACA,yIAGAH,CJJQ5H,GAAEgI,UIKVD,GJJQE,QAAQC,IAAI,OAASN,GAAa,SAAUO,GAC1C/B,QAAQC,IAAI,WAAY8B,EAAKC,QIKvCC,GJJUd,EAAWY,EAAKC,QIK1BC,EJJUb,EAAOzG,SIKjBwG,GJJUE,aAAaa,QAAQ,SAAUpI,IAA6EiI,EAAKC,QIK3HC,QJAEE,QAAS,aACTC,UAAW,WACTvH,KAAKT,aIMTiI,WJHEC,YACAC,QAAS,WIKX,GAAAC,GAAA3H,IJFIA,MIIJqG,OJFIrG,KAAKT,aAAeqI,WIIxB,WJFI5H,KAAKT,aIITsI,MJFIC,OAAOC,SAAW,WAChBJ,EAAOpI,aIGbyI,SJFML,EAAOpI,aIGbsI,MJFMF,EAAOpI,aIGb0I,aJC6BC,KAAKvJ,EAAqBhB,EAAoB,OAIrEwK,IACA,SAAU1K,EAAQC,EAASC,GK9VjCD,EAAAD,EAAAC,QAAAC,EAAA,SAKAD,EAAA8H,MAAA/H,EAAA2C,EAAA,gZAAma,IAAYgI,QAAA,EAAAC,SAAA,wCAAAC,SAAAC,SAAA,8KAA6PC,KAAA,YAAAC,gBAAA,iZAAqbC,WAAA,OLuW3lCC,IACA,SAAUlL,EAAQC,EAASC,GM1WjC,GAAAiL,GAAAjL,EAAA,IACA,iBAAAiL,SAAAnL,EAAA2C,EAAAwI,EAAA,MACAA,EAAAC,SAAApL,EAAAC,QAAAkL,EAAAC,OAEAlL,GAAA,gBAAAiL,GAAA,INmXME,IACA,SAAUrL,EAAQC,GO3XxBD,EAAAC,SAAgBqL,OAAA,WAAmB,GAAAC,GAAAhJ,KAAaiJ,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,aACAC,OAAA,UAEGH,EAAA,MAAAH,EAAAO,GAAA,aAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,aACAG,aAAA,OACAC,gBAAA,QAEAC,OACAC,OAAA,MAEGR,EAAA,OACHO,OACAE,KAAA,OAEGT,EAAA,UACHO,OACAhE,KAAA,WAEAmE,IACAC,MAAAd,EAAA5F,iBAEG4F,EAAAO,GAAA,gBAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHO,OACAE,KAAA,OAEGT,EAAA,UACHO,OACAhE,KAAA,WAEAmE,IACAC,MAAAd,EAAA/F,QAEG+F,EAAAO,GAAA,kBAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHY,YAAA,OACAL,OACAM,GAAA,iBAEG,IACFC","file":"static/js/4.add86bab1bb43f410d82.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 250:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(306)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(281),\n  /* template */\n  __webpack_require__(318),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-75d367dc\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 252:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(254), __esModule: true };\n\n/***/ }),\n\n/***/ 254:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(3);\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n/***/ }),\n\n/***/ 281:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(252);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n\n\n\nvar imgSrc = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACldJREFUeNq8mmtMVdkVx7eIKOIDn4gvUFuQghjFR6dlfOA79ZFaR/2iNWZMJu2HdtKZpk07TZ0mpp1p06RN+8U2WtExgpgZUzS1GmtQ6wsRH/gCBRF8IiqoKApdvz1n32zO3HPOBbErWV65nLP3/q+19n+ttTddHj16pGpqatQbki6i3ZzPFtHmzhy8paVFjRo1SvXs2VNFA2LXrl2dtegU0TTRyaKpogmi0c7vW0UbRatES0WLRa+I1nV0whcvXqi1a9eqpKSk0CSvI2+JviM6TXSsaFw73q0UPSe6W7RQ9FZHFxEI5OXLl9qFSFRUlIqO1q8QLt8T/aHotx1vfEVaW1vbuqzLVx5LdnSRKPGdL/oX0XLebW5uVt26dQv3XvuAAGLBggUqISFBD9jU1KQKCwvfrq+v39C1a9dsP9BITEyMBm+Ehb169SoESsawfz9M9Meia+S5P2dnZ/8hPT390d69e9WNGzf0/B0GwqKGDRumVUgh7tixYx/V1dW9L4PG2M8AgAUNHDhQDRkyRD8/YMAA1atXrzZAiOmHDx+q27dva4K5c+eOevLkiQbkeBqJl58/KikpWSKx/wP5/5FOCS0sUVlZOWbr1q25Yqm3sLIJGxYWFxenxo0bpzIyMtTw4cNVjx49fMcbMWKEfh65f/++unLlijp//ryqra3VXgIQ4J8/f54pc/5b5v+V6O9fCwggzp07l1FcXFwglk8xIAgRJpw6dapWPNER4T108uTJ6uLFi+rIkSPq1q1bOiQBJZ+x8tineEn0lx0GIoNlFBUV/VPcm4T7EbGUtvzcuXNVcnJyp+QDDJaZmalSUlLU0aNHtRKuVrj9gi0n+tOOABkjWiCTJJlQwhNZWVlq3rx5gSHUEWHMnJwcbSghFfalvck/dPLQx+0Bwiq3OwlOg8BC06dP1xO9acEzffv2VTt37lT37t2zwawXrRDd5n4nymOs9U52Du2JadOm/V9AGIHyV6xYofr166eNaAkb/+uRAPmW6AfmB/YE4RQEwp38OkMggmXLlumQs/LTENHfudfuBoIP/2i+xxPEK3siqObZsWOH2rdvX+DihAH1Zo4UODkJYiGRWu98V3Sp3x7hgSnGwrDG/PnzVffu3X09wcYUmlaG2fCexThtpLq6Wh0/flxVVVWpOXPmRETdEyZM0PmmrKxMmRQg8jPRL0xFbXuEVfzItvLEiRPVyJEjfScBwJkzZ3QpzSSHDh1SJ0+e9Hy+oaFBP3fp0iW1adMmdeLEiTZljZdgHOawns0SnRcutNgb3zRlBxmbZOcn7J/Dhw+HyhA2JYxDlg8nhColCc8D5tmzZ9qb27dvV3fv3vWda9CgQXpcxrDkPVOw2kDeMT+zoLFjx+p6yU8oLaibCCMDfuHChap3795hnwfE06dPQ8AJRQARNps3b1ZSy/l6Z9KkSSo2NtbeK2/LGMk2EHqI2SE3yURk2qCC8uzZs6FFYSne8QMPENRdlgOGyppKd9u2bbqY9KJkQt3ySp/S0tIcG8goJ5Nrb+DGoUOH+gKRUl4nK6yKhViMV0gZefz4sR4/XH9hvHP16lW1ceNGvdfYp25JTU1VtsGFPHIIcQMkzalltKUTExN9mcodJlAj4LGYnzx48MD391gaMLQCFju1EdIBazOsKu3AN8SDIY7Msh8O8obxnIlVwAPEi3IjAYIxCE0qYRbr1RXGx8drpQVwGrMkmXe48UiqO6MGid0wITRRQUIRaC/cdIvmZ6pp+hW/1pYsD6lYpNBPDJQY5dDXQJPcKNDg6yDBvbjfeIUwCwqbxsbGEG1jLLxoFsTiSXiRZHyMZj8nGz4hymGsHgYIiwvqjzXNiVUAzDu4mNaVBXrVYICAIHhn5syZas2aNTrJmYKQMWArCCGSct9FFPFRTkYPPqYIYxXyBSHBImCw8vLyNvRs6irjhfT0dLVu3ToNBECEEhvb9PxkfWK/vWGtv5J/mti7xr0sIJKSgcFgKWNxPskrfFZUVKgtW7aogoKCEOcPHjxYLV68WPXv379NeALO7BXe9coh7jB1EUUTNEM8NBggWC5ciIRtIceMUadOnQq1qzdv3lS5ubn6+Ma0qgDwsKKW0aNHtwllTlmCBOq3RYxzz4xebYeEzS5BQLAwFjVGuHbtWggYSqcXRBo8ZzzrXmS4isJVHTSPHz/+jgFSaj8ciXuJ5wsXLoRAGI+ak0EmZB8EMSCFIxncjOHqBsPOCyGYlkHmqZF3qk0GO2Mfa8JAWCgcnxM+hNP169d1GLDwcGFjgMBufsJ5liEMU3f5CWQAGMKWNcr414TF6s0KoJv7hgapaL1ilY0GUAZkMK/kxSQwW9DCIAYzBu8EVdzUYoYcWIt0kMfZhwZIregpsynhfF4IJ9xHQKGzZ8/Wz7oZxAYStD/oQegYTWmDEbki8Ot/AG68h+Nlf/zLrn5bnbYxNKBkS894xcrkgtWrV+uSggnCUTYnIH5Cd0hFgEcc6+rxvOTy5cs6X1k1XbmQTbG7sfrChJdTVep2NOgcFzCzZs3S77jLbq8wwVu0x6h9ljxlyhTPwpNwArhL8uX7RjcQLlk+szc9bWxQTmGzc3AHIDI1zzMpC/IKLej9wIED2guEJwYgn/j1M4CGaKycQ474u9dx0J+cY0m9EBjFlBiRHNusWrVKH93wLupFvZThS5cu1WRAaPHJPYxX0oR4aLRcv+e08boXkAoHTGgv4BW7hvI9EZfFZ2dna+9gXb/zYUhj+fLluvdZtGhRqAIIR+O0wHjR2uREzydBJ42/FS2za6/du3cHnnK4uzgWF3TQDUPBgBx0eMn+/fv1XnXR+K/Vl5eqvkCou95lfxkrk0nz8/NVXV37LmAjufvzaxkIJ+5MXM/sFP1bpIfY/xX9uT0ZtMcJBxvuTQtkwfHrwYMH3ZehZc49Y0ukQJRzU7TBZFEGpDECTElJyRsDwV7Iy8vTnnBVDmxsbpJr2n1jxU2RJLUYCakPAMLA0Ct7hsw/Y8YMz03aXiH5QrFFRUWapVx7woC41KGrNwaXZujD06dPN0i3t55TPsMcVL4Ujlxscu0QdBTkV/1y0sh5MWFrjlMNYxFO8p0viEAgDMTClyxZ8rF4oko6wE8kNwx2Lip1IuOYk3KGLM+5L5/kCUB7xT/kQdGJV6mdIBHTAtiH6FLZ5sl370v/URtEHNGRMA9WWrly5T8yMzOPFhYWbmhqalrGdyiNEYsj17AwAAKE8r1Pnz6hOMcoJD8KUoBQipuDCzdzSca/LcXgb6Qw/Ss5BO8HHRgGXk8zEPnAsdhVmZjD7hWiPzHXc7Y1WRwWhuXCHe0YA3jQbr1orszxqQC9uWfPHh1uQa1AIBDTZNmVrdNI7ZD/8idF3xH9vugM9eVdeOhPM6wsHIlcFM0DBNUFQCsrK/W8Ef8tCg+HOyyO4ASD/3zu6NdEJ3If4xy/ciju1SExGcnosuh/RPkTDfj8aSQnJu4rP+P1aOI4LS3tddmz3NE852fuLKCxRNFY5+yMFT1w6qQaJ4xem7JNYfo/AQYAqpk3qBLp2UoAAAAASUVORK5CYII=\";\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      draw: null,\n      group: null,\n      path: null,\n      panZoomTiger: null,\n      selectedPoints: null,\n      s_cx: null,\n      s_cy: null,\n      e_cx: null,\n      e_cy: null\n    };\n  },\n\n  methods: {\n    drawLine: function drawLine(lines) {\n      this.draw = this.$svg(\"svg_subway\").size(1660, 650).addClass(\"subway\");\n\n      var group = this.draw.group();\n      this.group = group;\n      for (var i = 0; i < lines.length; i++) {\n        var _lines$i = lines[i],\n            l_xmlattr = _lines$i.l_xmlattr,\n            p = _lines$i.p;\n        var lb = l_xmlattr.lb,\n            loop = l_xmlattr.loop,\n            uid = l_xmlattr.uid;\n\n        var dStr = \"\";\n        var isLb = false;\n        for (var j = 0; j < p.length; j++) {\n          var _p$j$p_xmlattr = p[j].p_xmlattr,\n              x = _p$j$p_xmlattr.x,\n              y = _p$j$p_xmlattr.y,\n              lb = _p$j$p_xmlattr.lb,\n              st = _p$j$p_xmlattr.st,\n              ex = _p$j$p_xmlattr.ex,\n              rc = _p$j$p_xmlattr.rc;\n\n\n          if (isLb) {\n            isLb = false;\n            dStr += x + \" \" + y + \" \";\n          } else {\n            if (rc) {\n              isLb = true;\n              dStr += \"Q\" + x + \" \" + y + \" \";\n            } else {\n              if (j == 0) {\n                dStr += \"M\" + x + \" \" + y + \" \";\n              } else {\n                dStr += \"L\" + x + \" \" + y + \" \";\n              }\n              if (j == p.length - 1) {\n                if (loop) {\n                  dStr += \"Z\";\n                }\n              }\n            }\n          }\n        }\n        var lb = l_xmlattr.lb,\n            lc = l_xmlattr.lc,\n            lbx = l_xmlattr.lbx,\n            lby = l_xmlattr.lby;\n\n        var lineColor = \"#\" + lc.split(\"x\")[1];\n        var line_text = group.text(lb);\n        line_text.move(lbx - 10, lby + 15).font({ fill: lineColor, family: \"Inconsolata\" }).addClass(\"line_name\");\n\n        var path = group.path(dStr);\n        this.path = path;\n        path.fill(\"none\");\n        path.stroke({\n          color: lineColor,\n          width: 4,\n          linecap: \"round\",\n          linejoin: \"round\"\n        });\n      }\n\n      var repeatStr = \"\";\n      for (var i = 0; i < lines.length; i++) {\n        var _lines$i2 = lines[i],\n            l_xmlattr = _lines$i2.l_xmlattr,\n            p = _lines$i2.p;\n\n\n        if (!l_xmlattr.uid) {\n          break;\n        }\n        for (var j = 0; j < p.length; j++) {\n          var _p$j$p_xmlattr2 = p[j].p_xmlattr,\n              x = _p$j$p_xmlattr2.x,\n              y = _p$j$p_xmlattr2.y,\n              rx = _p$j$p_xmlattr2.rx,\n              ry = _p$j$p_xmlattr2.ry,\n              lb = _p$j$p_xmlattr2.lb,\n              ex = _p$j$p_xmlattr2.ex,\n              rc = _p$j$p_xmlattr2.rc,\n              st = _p$j$p_xmlattr2.st,\n              uid = _p$j$p_xmlattr2.uid;\n\n\n          if (st) {\n            if (ex) {\n              if (!repeatStr.includes(uid)) {\n                var image = group.image(imgSrc).attr({ name: lb }).addClass(\"trans\");\n                image.size(16, 16).move(x - 8, y - 8).mouseover(function () {});\n              }\n            } else {\n              var station_point = group.circle(8).fill(\"#fff\").stroke({ color: \"#\" + l_xmlattr.lc.split(\"x\")[1] }).addClass(\"point\").move(x - 4, y - 4).attr({ name: lb });\n            }\n\n            if (!repeatStr.includes(uid)) {\n              var station_text = group.text(lb);\n              station_text.move(x + rx + 2, y + ry + 8).font({\n                family: \"黑体\",\n                size: 12,\n                anchor: \"start\"\n              }).addClass(\"station_name\");\n\n              repeatStr += uid;\n            }\n          }\n        }\n      }\n    },\n    drag: function drag() {\n      this.panZoomTiger.enablePan();\n      this.panZoomTiger.enableZoom();\n    },\n    select_circle: function select_circle() {\n      var _this = this;\n\n      this.panZoomTiger.disablePan();\n      this.panZoomTiger.disableZoom();\n\n      var circle;\n      $(\"#svg_subway\").css({ cursor: \"crosshair\" });\n\n      this.draw.mousedown(function (e) {\n        var transformValueStr = _this.group.attr(\"transform\").substring(7, _this.group.attr(\"transform\").length - 1);\n        var scale_x = transformValueStr.split(\",\")[0];\n        var scale_y = transformValueStr.split(\",\")[3];\n        var translate_x = transformValueStr.split(\",\")[4];\n        var translate_y = transformValueStr.split(\",\")[5];\n\n        _this.s_x = (e.offsetX - translate_x) / scale_x;\n        _this.s_y = (e.offsetY - translate_y) / scale_y;\n\n        circle = _this.draw.ellipse(10, 10).fill(\"transparent\").stroke({ color: \"#f06\" }).addClass(\"select-circle\").move(_this.s_x - 15, _this.s_y - 15);\n\n        _this.group.add(circle);\n\n        _this.draw.mousemove(function (e) {\n          var transformValueStr = _this.group.attr(\"transform\").substring(7, _this.group.attr(\"transform\").length - 1);\n          var scale_x = transformValueStr.split(\",\")[0];\n          var scale_y = transformValueStr.split(\",\")[3];\n          var translate_x = transformValueStr.split(\",\")[4];\n          var translate_y = transformValueStr.split(\",\")[5];\n\n          _this.m_x = (e.offsetX - translate_x) / scale_x;\n          _this.m_y = (e.offsetY - translate_y) / scale_y;\n\n          $(\".select-circle\");\n\n          circle.attr({\n            rx: Math.abs(_this.m_x - _this.s_x) / 2,\n            ry: Math.abs(_this.m_y - _this.s_y) / 2,\n            cx: _this.m_x - 15,\n            cy: _this.m_y - 15\n          });\n\n          _this.draw.mouseup(function (e) {\n            var transformValueStr = _this.group.attr(\"transform\").substring(7, _this.group.attr(\"transform\").length - 1);\n            var scale_x = transformValueStr.split(\",\")[0];\n            var scale_y = transformValueStr.split(\",\")[3];\n            var translate_x = transformValueStr.split(\",\")[4];\n            var translate_y = transformValueStr.split(\",\")[5];\n\n            _this.e_x = (e.offsetX - translate_x) / scale_x;\n            _this.e_y = (e.offsetY - translate_y) / scale_y;\n\n            circle.attr({\n              rx: Math.abs(_this.e_x - _this.s_x) / 2,\n              ry: Math.abs(_this.e_x - _this.s_x) / 2,\n              cx: _this.e_x - 15,\n              cy: _this.e_y - 15\n            });\n\n            _this.draw.off();\n\n            $(\"#svg_subway\").css({ cursor: \"default\" });\n\n            console.log(circle.attr(), $(\".point\")[0].getAttribute(\"cx\"));\n            var points = [];\n\n            var pointsHtml = $(\".point\");\n            for (var i = 1; i < pointsHtml.length; i++) {\n              points.push({\n                cx: pointsHtml[i].getAttribute(\"cx\"),\n                cy: pointsHtml[i].getAttribute(\"cy\"),\n                s_name: pointsHtml[i].getAttribute(\"name\"),\n                type: \"point\"\n              });\n            }\n\n            var tansHtml = $(\".trans\");\n            for (var i = 1; i < tansHtml.length; i++) {\n              points.push({\n                cx: tansHtml[i].getAttribute(\"x\"),\n                cy: tansHtml[i].getAttribute(\"y\"),\n                s_name: tansHtml[i].getAttribute(\"name\"),\n                type: \"trans\"\n              });\n            }\n            console.log(points);\n\n            var circle_cx = circle.attr(\"cx\");\n            var circle_cy = circle.attr(\"cy\");\n            var circle_rx = circle.attr(\"rx\");\n            var circle_rx = circle.attr(\"ry\");\n            _this.selectedPoints = [];\n            points.map(function (v) {\n              var a = (v.cx - circle_cx) * (v.cx - circle_cx) + (v.cy - circle_cy) * (v.cy - circle_cy);\n              var b = void 0;\n              if (v.type === \"point\") {\n                b = circle_rx + 4;\n              } else {\n                b = circle_rx;\n              }\n              var d = Math.sqrt(a) - b;\n              if (d <= 0) {\n                console.log(d);\n                console.log(v.s_name);\n              }\n            });\n          });\n        });\n      });\n    },\n    init: function init() {\n      var _this2 = this;\n\n      var cityCode = 131;\n\n      var lineData;\n\n      if (localStorage.getItem(\"subway\")) {\n        lineData = JSON.parse(localStorage.getItem(\"subway\"));\n        this.drawLine(lineData);\n      } else {\n        var timeStamp = (Math.random() * 100000).toFixed(0);\n        var checkUrl = \"https://api.map.baidu.com/?qt=subways&c=\" + cityCode + \"&format=json&ak=yZSTYLk9UUvs0ZqXqBbtTp8ViKk5vxLM&v=3.0&from=jsapi&callback=BMapSub._rd._cbk\" + timeStamp;\n        $.getScript(checkUrl);\n        BMapSub._rd[\"_cbk\" + timeStamp] = function (json) {\n          console.log(\"BMapSub:\", json.subways.l);\n          lineData = json.subways.l;\n          _this2.drawLine(lineData);\n          localStorage.setItem(\"subway\", __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(json.subways.l));\n        };\n      }\n    }\n  },\n  created: function created() {},\n  destroyed: function destroyed() {\n    this.panZoomTiger.destroy();\n  },\n\n  computed: {},\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.init();\n\n    this.panZoomTiger = svgPanZoom(\".subway\");\n\n    this.panZoomTiger.fit();\n\n    window.onresize = function () {\n      _this3.panZoomTiger.resize();\n      _this3.panZoomTiger.fit();\n      _this3.panZoomTiger.center();\n    };\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(253)))\n\n/***/ }),\n\n/***/ 293:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(230)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.draw[data-v-75d367dc] {\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 5px;\\r\\n  user-select: none;\\r\\n  /* min-width: 1600px; */\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 650px !important;\\r\\n  /* margin-top: 10px; */\\n}\\nsvg[data-v-75d367dc] {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 650px !important;\\n}\\n.draw .subway[data-v-75d367dc]{\\r\\n  height: 650px;\\n}\\r\\n\", \"\", {\"version\":3,\"sources\":[\"D:/2020/BJSubway/src/views/train.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,uBAAuB;EACvB,mBAAmB;EACnB,kBAAkB;EAClB,wBAAwB;EACxB,YAAY;EACZ,aAAa;EACb,6BAA6B;EAC7B,uBAAuB;CACxB;AACD;EACE,YAAY;EACZ,aAAa;EACb,6BAA6B;CAC9B;AACD;EACE,cAAc;CACf\",\"file\":\"train.vue\",\"sourcesContent\":[\"\\n.draw[data-v-75d367dc] {\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 5px;\\r\\n  user-select: none;\\r\\n  /* min-width: 1600px; */\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 650px !important;\\r\\n  /* margin-top: 10px; */\\n}\\nsvg[data-v-75d367dc] {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 650px !important;\\n}\\n.draw .subway[data-v-75d367dc]{\\r\\n  height: 650px;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 306:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(293);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(231)(\"6639637f\", content, true);\n\n/***/ }),\n\n/***/ 318:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"height\": \"100%\"\n    }\n  }, [_c('h2', [_vm._v(\"北京地铁线路图\")]), _vm._v(\" \"), _c('Row', {\n    staticStyle: {\n      \"margin-top\": \"10px\",\n      \"margin-bottom\": \"10px\"\n    },\n    attrs: {\n      \"gutter\": 24\n    }\n  }, [_c('Col', {\n    attrs: {\n      \"span\": \"2\"\n    }\n  }, [_c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.select_circle\n    }\n  }, [_vm._v(\"点击框选车站\")])], 1), _vm._v(\" \"), _c('Col', {\n    attrs: {\n      \"span\": \"3\"\n    }\n  }, [_c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.drag\n    }\n  }, [_vm._v(\"点击拖拽\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"draw\",\n    attrs: {\n      \"id\": \"svg_subway\"\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/4.add86bab1bb43f410d82.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-75d367dc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./train.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./train.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-75d367dc\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./train.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-75d367dc\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/train.vue\n// module id = 250\n// module chunks = 4","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/json/stringify.js\n// module id = 252\n// module chunks = 0 1 2 4 5 6","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/json/stringify.js\n// module id = 254\n// module chunks = 0 1 2 4 5 6","<template>\r\n  <div style=\"height: 100%;\">\r\n    <h2>北京地铁线路图</h2>\r\n    <Row :gutter=\"24\" style=\"margin-top:10px;margin-bottom:10px;\">\r\n      <!-- <Col span=\"5\">\r\n        <div style=\"margin: 10px 0 30px;\">\r\n          <Icon type=\"ios-information-circle\" />使用 svg.js 操作各元素\r\n        </div>\r\n      </Col> -->\r\n      <Col span=\"2\">\r\n        <Button type=\"primary\" @click=\"select_circle\">点击框选车站</Button>\r\n      </Col>\r\n      <Col span=\"3\">\r\n        <Button type=\"primary\" @click=\"drag\">点击拖拽</Button>\r\n      </Col>\r\n    </Row>\r\n    <div id=\"svg_subway\" class=\"draw\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst imgSrc =\r\n  \"data:image/png;base64,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\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      draw: null,\r\n      group: null,\r\n      path: null,\r\n      panZoomTiger: null,\r\n      selectedPoints: null,\r\n      s_cx: null,\r\n      s_cy: null,\r\n      e_cx: null,\r\n      e_cy: null\r\n    };\r\n  },\r\n  methods: {\r\n    drawLine(lines) {\r\n      // 开始画线\r\n      this.draw = this.$svg(\"svg_subway\")\r\n\r\n        .size(1660, 650)\r\n        .addClass(\"subway\");\r\n      // var draw = SVG('svg_subway').size(800, 600)\r\n      var group = this.draw.group();\r\n      this.group = group;\r\n      for (var i = 0; i < lines.length; i++) {\r\n        var { l_xmlattr, p } = lines[i]; // p： 线内站点信息\r\n        var { lb, loop, uid } = l_xmlattr; // 地铁线信息\r\n        var dStr = \"\"; //地铁线路点 轨迹 点 字符串 path()\r\n        var isLb = false; //是否圆润拐点\r\n        for (var j = 0; j < p.length; j++) {\r\n          // rc: 是否是首发站\r\n          var { x, y, lb, st, ex, rc } = p[j].p_xmlattr; // 每个站点的详细信息\r\n\r\n          if (isLb) {\r\n            isLb = false;\r\n            dStr += x + \" \" + y + \" \";\r\n          } else {\r\n            if (rc) {\r\n              isLb = true;\r\n              dStr += \"Q\" + x + \" \" + y + \" \";\r\n            } else {\r\n              if (j == 0) {\r\n                dStr += \"M\" + x + \" \" + y + \" \";\r\n              } else {\r\n                dStr += \"L\" + x + \" \" + y + \" \";\r\n              }\r\n              if (j == p.length - 1) {\r\n                if (loop) {\r\n                  dStr += \"Z\";\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        var { lb, lc, lbx, lby } = l_xmlattr;\r\n\r\n        // 绘制地铁线路名称 和样式\r\n        var lineColor = \"#\" + lc.split(\"x\")[1];\r\n        var line_text = group.text(lb);\r\n        line_text\r\n          .move(lbx - 10, lby + 15)\r\n          .font({ fill: lineColor, family: \"Inconsolata\" })\r\n          .addClass(\"line_name\");\r\n\r\n        // 绘制地铁线 和样式\r\n        var path = group.path(dStr);\r\n        this.path = path;\r\n        path.fill(\"none\");\r\n        path.stroke({\r\n          color: lineColor,\r\n          width: 4,\r\n          linecap: \"round\",\r\n          linejoin: \"round\"\r\n        });\r\n        // .click(function() {\r\n        //   this.stroke({ width: 8})\r\n        // })\r\n      }\r\n\r\n      //  根据uid 判断重复的车站重复点\r\n      var repeatStr = \"\"; //uid字符串判断重复点\r\n      for (var i = 0; i < lines.length; i++) {\r\n        var { l_xmlattr, p } = lines[i];\r\n\r\n        if (!l_xmlattr.uid) {\r\n          //暂未开通\r\n          break;\r\n        }\r\n        for (var j = 0; j < p.length; j++) {\r\n          // x, y ： 坐标位置 uid: 唯一标志id\r\n          // ex: 是否是换乘点 st: 是否是车站 rc： lb: 车站名称\r\n          var { x, y, rx, ry, lb, ex, rc, st, uid } = p[j].p_xmlattr;\r\n\r\n          if (st) {\r\n            if (ex) {\r\n              // 换乘站\r\n              if (!repeatStr.includes(uid)) {\r\n                var image = group\r\n                  .image(imgSrc)\r\n                  .attr({ name: lb })\r\n                  .addClass(\"trans\");\r\n                image\r\n                  .size(16, 16)\r\n                  .move(x - 8, y - 8)\r\n                  .mouseover(function() {\r\n                    // this\r\n                    // .size(30, 30)\r\n                    // .scale(1.5,1,5)\r\n                    // .animate({ ease: '<', delay: '0.5s', loops: true, reversing: true }).rotate(360).reverse()\r\n                  });\r\n              }\r\n            } else {\r\n              // 非换成站\r\n              var station_point = group\r\n                .circle(8)\r\n                .fill(\"#fff\")\r\n                .stroke({ color: \"#\" + l_xmlattr.lc.split(\"x\")[1] })\r\n                .addClass(\"point\")\r\n                .move(x - 4, y - 4)\r\n                .attr({ name: lb });\r\n            }\r\n\r\n            // 未重复的换成车站名\r\n            if (!repeatStr.includes(uid)) {\r\n              var station_text = group.text(lb);\r\n              station_text\r\n                .move(x + rx + 2, y + ry + 8)\r\n                .font({\r\n                  // family: 'Helvetica',\r\n                  family: \"黑体\",\r\n                  size: 12,\r\n                  anchor: \"start\"\r\n                  // leading:  '3em',\r\n                  // fill: '#000',\r\n                })\r\n                .addClass(\"station_name\");\r\n\r\n              repeatStr += uid;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    drag() {\r\n      // 开启平移和缩放\r\n      this.panZoomTiger.enablePan();\r\n      this.panZoomTiger.enableZoom();\r\n    },\r\n    select_circle() {\r\n      // 禁用平移和缩放\r\n      this.panZoomTiger.disablePan();\r\n      this.panZoomTiger.disableZoom();\r\n      // 让鼠标指针变成 十字架形态  matrix(0.4,0,0,0.4,402,314)\r\n      var circle;\r\n      $(\"#svg_subway\").css({ cursor: \"crosshair\" });\r\n\r\n      this.draw.mousedown(e => {\r\n        // console.log(e, this.group.attr('transform'))\r\n        // 计算坐标\r\n        let transformValueStr = this.group\r\n          .attr(\"transform\")\r\n          .substring(7, this.group.attr(\"transform\").length - 1);\r\n        let scale_x = transformValueStr.split(\",\")[0];\r\n        let scale_y = transformValueStr.split(\",\")[3];\r\n        let translate_x = transformValueStr.split(\",\")[4];\r\n        let translate_y = transformValueStr.split(\",\")[5];\r\n\r\n        this.s_x = (e.offsetX - translate_x) / scale_x;\r\n        this.s_y = (e.offsetY - translate_y) / scale_y;\r\n\r\n        // console.log( this.s_x, this.s_y)\r\n\r\n        circle = this.draw\r\n          .ellipse(10, 10)\r\n          .fill(\"transparent\")\r\n          .stroke({ color: \"#f06\" })\r\n          .addClass(\"select-circle\")\r\n          .move(this.s_x - 15, this.s_y - 15);\r\n\r\n        this.group.add(circle);\r\n\r\n        this.draw.mousemove(e => {\r\n          let transformValueStr = this.group\r\n            .attr(\"transform\")\r\n            .substring(7, this.group.attr(\"transform\").length - 1);\r\n          let scale_x = transformValueStr.split(\",\")[0];\r\n          let scale_y = transformValueStr.split(\",\")[3];\r\n          let translate_x = transformValueStr.split(\",\")[4];\r\n          let translate_y = transformValueStr.split(\",\")[5];\r\n\r\n          this.m_x = (e.offsetX - translate_x) / scale_x;\r\n          this.m_y = (e.offsetY - translate_y) / scale_y;\r\n\r\n          $(\".select-circle\");\r\n          // .animate({ ease: '<', delay: '1.5s' })\r\n          circle.attr({\r\n            rx: Math.abs(this.m_x - this.s_x) / 2,\r\n            ry: Math.abs(this.m_y - this.s_y) / 2,\r\n            cx: this.m_x - 15,\r\n            cy: this.m_y - 15\r\n          });\r\n\r\n          this.draw.mouseup(e => {\r\n            let transformValueStr = this.group\r\n              .attr(\"transform\")\r\n              .substring(7, this.group.attr(\"transform\").length - 1);\r\n            let scale_x = transformValueStr.split(\",\")[0];\r\n            let scale_y = transformValueStr.split(\",\")[3];\r\n            let translate_x = transformValueStr.split(\",\")[4];\r\n            let translate_y = transformValueStr.split(\",\")[5];\r\n\r\n            this.e_x = (e.offsetX - translate_x) / scale_x;\r\n            this.e_y = (e.offsetY - translate_y) / scale_y;\r\n\r\n            circle.attr({\r\n              rx: Math.abs(this.e_x - this.s_x) / 2,\r\n              ry: Math.abs(this.e_x - this.s_x) / 2,\r\n              cx: this.e_x - 15,\r\n              cy: this.e_y - 15\r\n            });\r\n\r\n            // 销毁所有事件\r\n            this.draw.off();\r\n\r\n            $(\"#svg_subway\").css({ cursor: \"default\" });\r\n\r\n            console.log(circle.attr(), $(\".point\")[0].getAttribute(\"cx\"));\r\n            let points = [];\r\n            // 非换乘点\r\n            var pointsHtml = $(\".point\");\r\n            for (var i = 1; i < pointsHtml.length; i++) {\r\n              points.push({\r\n                cx: pointsHtml[i].getAttribute(\"cx\"),\r\n                cy: pointsHtml[i].getAttribute(\"cy\"),\r\n                s_name: pointsHtml[i].getAttribute(\"name\"),\r\n                type: \"point\"\r\n              });\r\n            }\r\n\r\n            //换乘点\r\n            var tansHtml = $(\".trans\");\r\n            for (var i = 1; i < tansHtml.length; i++) {\r\n              points.push({\r\n                cx: tansHtml[i].getAttribute(\"x\"),\r\n                cy: tansHtml[i].getAttribute(\"y\"),\r\n                s_name: tansHtml[i].getAttribute(\"name\"),\r\n                type: \"trans\"\r\n              });\r\n            }\r\n            console.log(points);\r\n            // $('circle').map(v => {\r\n            //   console.log(v.attributes[2].value)\r\n            // })\r\n            var circle_cx = circle.attr(\"cx\");\r\n            var circle_cy = circle.attr(\"cy\");\r\n            var circle_rx = circle.attr(\"rx\");\r\n            var circle_rx = circle.attr(\"ry\");\r\n            this.selectedPoints = [];\r\n            points.map(v => {\r\n              let a =\r\n                (v.cx - circle_cx) * (v.cx - circle_cx) +\r\n                (v.cy - circle_cy) * (v.cy - circle_cy); // 距离平方\r\n              let b;\r\n              if (v.type === \"point\") {\r\n                b = circle_rx + 4; // 两个圆的半径和\r\n              } else {\r\n                b = circle_rx; // 圆圈的半径\r\n              }\r\n              var d = Math.sqrt(a) - b;\r\n              if (d <= 0) {\r\n                console.log(d);\r\n                console.log(v.s_name);\r\n              }\r\n            });\r\n          });\r\n        });\r\n      });\r\n    },\r\n    init() {\r\n      var cityCode = 131;\r\n\r\n      var lineData;\r\n\r\n      if (localStorage.getItem(\"subway\")) {\r\n        lineData = JSON.parse(localStorage.getItem(\"subway\"));\r\n        this.drawLine(lineData);\r\n      } else {\r\n        var timeStamp = (Math.random() * 100000).toFixed(0);\r\n        var checkUrl =\r\n          \"https://api.map.baidu.com/?qt=subways&c=\" +\r\n          cityCode +\r\n          \"&format=json&ak=yZSTYLk9UUvs0ZqXqBbtTp8ViKk5vxLM&v=3.0&from=jsapi&callback=BMapSub._rd._cbk\" +\r\n          timeStamp;\r\n        $.getScript(checkUrl);\r\n        BMapSub._rd[\"_cbk\" + timeStamp] = json => {\r\n          console.log(\"BMapSub:\", json.subways.l);\r\n          lineData = json.subways.l;\r\n          this.drawLine(lineData);\r\n          localStorage.setItem(\"subway\", JSON.stringify(json.subways.l));\r\n        };\r\n      }\r\n    }\r\n  },\r\n  created() {},\r\n  destroyed() {\r\n    // 销毁 panZoomTiger 实例\r\n    this.panZoomTiger.destroy();\r\n  },\r\n  computed: {},\r\n  mounted() {\r\n    this.init();\r\n    // 获取方法实例  // 文档: https://www.npmjs.com/package/svg-pan-zoom\r\n    this.panZoomTiger = svgPanZoom(\".subway\");\r\n    // this.panZoomTiger.zoom(1.2)\r\n    this.panZoomTiger.fit();\r\n\r\n    window.onresize = () => {\r\n      this.panZoomTiger.resize(); // update SVG cached size and controls positions\r\n      this.panZoomTiger.fit();\r\n      this.panZoomTiger.center();\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.draw {\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n  user-select: none;\r\n  /* min-width: 1600px; */\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 650px !important;\r\n  /* margin-top: 10px; */\r\n}\r\nsvg {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 650px !important;\r\n}\r\n.draw .subway{\r\n  height: 650px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// train.vue?2c1cb0e4","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.draw[data-v-75d367dc] {\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 5px;\\r\\n  user-select: none;\\r\\n  /* min-width: 1600px; */\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 650px !important;\\r\\n  /* margin-top: 10px; */\\n}\\nsvg[data-v-75d367dc] {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 650px !important;\\n}\\n.draw .subway[data-v-75d367dc]{\\r\\n  height: 650px;\\n}\\r\\n\", \"\", {\"version\":3,\"sources\":[\"D:/2020/BJSubway/src/views/train.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,uBAAuB;EACvB,mBAAmB;EACnB,kBAAkB;EAClB,wBAAwB;EACxB,YAAY;EACZ,aAAa;EACb,6BAA6B;EAC7B,uBAAuB;CACxB;AACD;EACE,YAAY;EACZ,aAAa;EACb,6BAA6B;CAC9B;AACD;EACE,cAAc;CACf\",\"file\":\"train.vue\",\"sourcesContent\":[\"\\n.draw[data-v-75d367dc] {\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 5px;\\r\\n  user-select: none;\\r\\n  /* min-width: 1600px; */\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 650px !important;\\r\\n  /* margin-top: 10px; */\\n}\\nsvg[data-v-75d367dc] {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 650px !important;\\n}\\n.draw .subway[data-v-75d367dc]{\\r\\n  height: 650px;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-75d367dc\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/train.vue\n// module id = 293\n// module chunks = 4","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-75d367dc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./train.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"6639637f\", content, true);\n\n\n// WEBPACK FOOTER //\n// \"}!./~/vue-style-loader!./~/css-loader?{\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-75d367dc\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/train.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"height\": \"100%\"\n    }\n  }, [_c('h2', [_vm._v(\"北京地铁线路图\")]), _vm._v(\" \"), _c('Row', {\n    staticStyle: {\n      \"margin-top\": \"10px\",\n      \"margin-bottom\": \"10px\"\n    },\n    attrs: {\n      \"gutter\": 24\n    }\n  }, [_c('Col', {\n    attrs: {\n      \"span\": \"2\"\n    }\n  }, [_c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.select_circle\n    }\n  }, [_vm._v(\"点击框选车站\")])], 1), _vm._v(\" \"), _c('Col', {\n    attrs: {\n      \"span\": \"3\"\n    }\n  }, [_c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.drag\n    }\n  }, [_vm._v(\"点击拖拽\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"draw\",\n    attrs: {\n      \"id\": \"svg_subway\"\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-75d367dc\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/train.vue\n// module id = 318\n// module chunks = 4"],"sourceRoot":""}