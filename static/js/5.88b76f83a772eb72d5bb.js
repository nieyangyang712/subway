webpackJsonp([5],{235:function(t,e,a){var i=a(0)(a(261),a(266),null,null,null);t.exports=i.exports},251:function(t,e,a){"use strict";function i(){var t=new Date;return new Date(t).getFullYear()+(new Date(t).getMonth()+1<10?"0"+(new Date(t).getMonth()+1):new Date(t).getMonth()+1)+(new Date(t).getDate()<10?"0"+new Date(t).getDate():new Date(t).getDate())+(new Date(t).getHours()<10?"0"+new Date(t).getHours():new Date(t).getHours())+(new Date(t).getMinutes()<10?"0"+new Date(t).getMinutes():new Date(t).getMinutes())+(new Date(t).getSeconds()<10?"0"+new Date(t).getSeconds():new Date(t).getSeconds())}function o(t){return new Date(t).getFullYear()+"-"+(new Date(t).getMonth()+1<10?"0"+(new Date(t).getMonth()+1):new Date(t).getMonth()+1)+"-"+(new Date(t).getDate()<10?"0"+new Date(t).getDate():new Date(t).getDate())+" "+(new Date(t).getHours()<10?"0"+new Date(t).getHours():new Date(t).getHours())+":"+(new Date(t).getMinutes()<10?"0"+new Date(t).getMinutes():new Date(t).getMinutes())+":"+(new Date(t).getSeconds()<10?"0"+new Date(t).getSeconds():new Date(t).getSeconds())}function l(){return new Date(+new Date((new Date).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}function s(t){var t=t,e=new Date,a=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),l=e.getHours(),s=e.getMinutes(),r=e.getSeconds();return o<=t&&(i>1?i-=1:(a-=1,i=12)),e.setDate(e.getDate()-t),a=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),a+"-"+(i<10?"0"+i:i)+"-"+(o<10?"0"+o:o)+" "+(l<10?"0"+l:l)+":"+(s<10?"0"+s:s)+":"+(r<10?"0"+r:r)}function r(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;return a>1?a-=1:(e-=1,a=12),e+"-"+(a<10?"0"+a:a)+"-01 00:00:00"}function n(){return"2000-01-01 01:01:01"}e.d=i,e.c=o,e.b=l,e.f=s,e.a=r,e.e=n},252:function(t,e,a){t.exports={default:a(254),__esModule:!0}},254:function(t,e,a){var i=a(3),o=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},261:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(252),o=a.n(i),l=a(251);e.default={name:"updataMsg",props:["historyData"],data:function(){var t=this.$store.state.parameter.deserve;return{reserve:!1,prepare:!1,commitStatus:t.M003,typeNo:t.M005,fileFormat:t.M018,ttsLibrary:t.M013,ttsStyle:t.M015,ttsSpeed:t.M016,fbGroundType:t.M401,uploadFiles:"",frequency:"",compile:0,createTime:0,cacheData:{},updateMaterial:{}}},methods:{modifier:function(e){var a=this;console.log(this.uploadFiles),this.compile=e,this.historyData[this.compile].commitStatus=this.$store.state.parameter.deserve.M003[this.historyData[this.compile].commitStatus-1].itemValue,this.historyData[this.compile].typeNo=this.$store.state.parameter.deserve.M005[this.historyData[this.compile].typeNo-1].itemValue,this.historyData[this.compile].fileFormat=this.$store.state.parameter.deserve.M018[this.historyData[this.compile].fileFormat-1].itemValue,this.createTime=new Date(+new Date(new Date(this.historyData[this.compile].createTime).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,""),this.historyData[this.compile].ttsLibrary=this.$store.state.parameter.deserve.M013[this.historyData[this.compile].ttsLibrary-1].itemValue,this.historyData[this.compile].ttsSpeed=this.$store.state.parameter.deserve.M016[this.historyData[this.compile].ttsSpeed].itemValue,this.historyData[this.compile].ttsStyle=this.$store.state.parameter.deserve.M015[this.historyData[this.compile].ttsStyle-1].itemValue,this.historyData[this.compile].fbGroundType=this.$store.state.parameter.deserve.M401[this.historyData[this.compile].fbGroundType-1].itemValue;var i="data:audio/mpeg;base64,";this.frequency="",this.$axios({method:"get",url:this.baseURL+"/material/MaterialInfo/getFileByte",params:{infoid:this.historyData[this.compile].infoId}}).then(function(e){console.log(e.data),0==e.data.code?(i+=e.data.result,a.frequency=i,t("#frequency")[0].src=i):1==e.data.code&&console.log(e.data.msg)}).catch(function(t){})},updateAlter:function(){var e=this;this.cacheData=JSON.parse(o()(this.historyData[this.compile])),this.cacheData.fileDuration=t(".duration").html(),this.cacheData.createTime=a.i(l.c)(this.historyData[this.compile].createTime),this.cacheData.reviewDate=a.i(l.c)(this.historyData[this.compile].reviewDate);var i=new FormData;for(var s in this.cacheData)i.append(s,this.cacheData[s]);this.$axios({method:"post",data:i,url:this.baseURL+"/material/MaterialInfo/update_Material",headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t),"200"==t.status&&(e.reserve=!1,"1"==t.data.code?alert(t.data.msg):"0"==t.data.code&&alert("Success!"))}).catch(function(t){})},updateHandleSubmit:function(t){this.historyData[this.compile].commitStatus=2,this.updateAlter()},updatePreserveSubmit:function(t){this.historyData[this.compile].commitStatus=1,console.log(this.uploadFiles),this.updateAlter()},handleUpload:function(e){this.uploadFiles=e,console.log(this.uploadFiles),this.fileSize=e.size/1024,this.fileSize<1024?(this.fileSize=Math.floor(this.fileSize),this.historyData[this.compile].fileSize=this.fileSize):alert("文件过大"),t(".musicPlayPanel").attr("src",URL.createObjectURL(this.uploadFiles)),t(".musicPlayPanel").get("0").load(),console.log(t(".musicPlayPanel"));var a=t(".musicPlayPanel");if(null!=a){a[0].load(),a[0].oncanplay=function(){t(".duration").html(Math.floor(a[0].duration))}}return!1},time_to_sec:function(t){var e=t.split(":")[0],a=t.split(":")[1];return Number(60*e)+Number(a)},select_record:function(t){console.log(t),this.historyData[this.compile].fileSize=Math.ceil(t.blob.size/1024),this.historyData[this.compile].fileDuration=this.time_to_sec(t.duration),this.uploadFiles=new File([t.blob],{type:"audio/mp3"})},mic_failed:function(){alert("您的麦克风不起作用")},handleReset:function(t){this.reserve=!1}},created:function(){}}}.call(e,a(253))},266:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{staticStyle:{"z-index":"1021"},attrs:{title:"修改","mask-closable":"",width:"1000",styles:{top:"20px"}},model:{value:t.reserve,callback:function(e){t.reserve=e},expression:"reserve"}},[t.reserve?a("Form",{attrs:{"label-position":"right","label-width":120}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"素材名称"}},[a("Input",{model:{value:t.historyData[t.compile].infoName,callback:function(e){t.historyData[t.compile].infoName=e},expression:"historyData[compile].infoName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"素材状态"}},[a("Select",{attrs:{clearable:"",disabled:""},model:{value:t.historyData[t.compile].commitStatus,callback:function(e){t.historyData[t.compile].commitStatus=e},expression:"historyData[compile].commitStatus"}},t._l(t.commitStatus,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"素材类型"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].typeNo,callback:function(e){t.historyData[t.compile].typeNo=e},expression:"historyData[compile].typeNo"}},t._l(t.typeNo,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"音库",prop:"ttsLibrary"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].ttsLibrary,callback:function(e){t.historyData[t.compile].ttsLibrary=e},expression:"historyData[compile].ttsLibrary"}},t._l(t.ttsLibrary,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"语速",prop:"ttsSpeed"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].ttsSpeed,callback:function(e){t.historyData[t.compile].ttsSpeed=e},expression:"historyData[compile].ttsSpeed"}},t._l(t.ttsSpeed,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"上传素材"}},[a("Upload",{attrs:{format:["mp3"],"before-upload":t.handleUpload,action:""}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline",accept:"audio/mp3"}},[t._v("选择文件")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"试听"}},[a("audio",{staticClass:"musicPlayPanel",staticStyle:{height:"30px",width:"320px"},attrs:{src:t.frequency,controls:"controls"}})])],1),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"素材编制人"}},[a("Input",{attrs:{value:t.historyData[t.compile].createUserName,disabled:""}})],1),t._v(" "),a("FormItem",{attrs:{label:"素材编制日期"}},[a("Input",{attrs:{value:t.createTime,disabled:""}})],1),t._v(" "),a("FormItem",{attrs:{label:"素材语音格式"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].fileFormat,callback:function(e){t.historyData[t.compile].fileFormat=e},expression:"historyData[compile].fileFormat"}},t._l(t.fileFormat,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"风格",prop:"ttsStyle"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].ttsStyle,callback:function(e){t.historyData[t.compile].ttsStyle=e},expression:"historyData[compile].ttsStyle"}},t._l(t.ttsStyle,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"前背景类型",prop:"fbGroundType"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].fbGroundType,callback:function(e){t.historyData[t.compile].fbGroundType=e},expression:"historyData[compile].fbGroundType"}},t._l(t.fbGroundType,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"素材大小"}},[a("Input",{attrs:{disabled:""},model:{value:t.historyData[t.compile].fileSize,callback:function(e){t.historyData[t.compile].fileSize=e},expression:"historyData[compile].fileSize"}})],1),t._v(" "),a("FormItem",{attrs:{label:"素材时长"}},[a("Span",{staticClass:"duration"},[t._v(t._s(t.historyData[t.compile].fileDuration))])],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"22"}},[a("FormItem",{attrs:{label:"素材文本信息"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.historyData[t.compile].infoComment,callback:function(e){t.historyData[t.compile].infoComment=e},expression:"historyData[compile].infoComment"}})],1)],1)],1)],1):t._e(),t._v(" "),a("div",{slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updatePreserveSubmit()}}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updateHandleSubmit()}}},[t._v("提交审核")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.handleReset()}}},[t._v("取消")])],1)],1),t._v(" "),a("Modal",{staticStyle:{"z-index":"1021"},attrs:{title:"修改","mask-closable":"",width:"1000",styles:{top:"20px"}},model:{value:t.prepare,callback:function(e){t.prepare=e},expression:"prepare"}},[t.prepare?a("Form",{attrs:{"label-position":"right","label-width":120}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"素材名称"}},[a("Input",{model:{value:t.historyData[t.compile].infoName,callback:function(e){t.historyData[t.compile].infoName=e},expression:"historyData[compile].infoName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"素材状态"}},[a("Select",{attrs:{clearable:"",disabled:""},model:{value:t.historyData[t.compile].commitStatus,callback:function(e){t.historyData[t.compile].commitStatus=e},expression:"historyData[compile].commitStatus"}},t._l(t.commitStatus,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"素材类型"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].typeNo,callback:function(e){t.historyData[t.compile].typeNo=e},expression:"historyData[compile].typeNo"}},t._l(t.typeNo,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"音库",prop:"ttsLibrary"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].ttsLibrary,callback:function(e){t.historyData[t.compile].ttsLibrary=e},expression:"historyData[compile].ttsLibrary"}},t._l(t.ttsLibrary,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"语速",prop:"ttsSpeed"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].ttsSpeed,callback:function(e){t.historyData[t.compile].ttsSpeed=e},expression:"historyData[compile].ttsSpeed"}},t._l(t.ttsSpeed,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"试听"}},[a("audio",{staticClass:"musicPlayPanel",staticStyle:{height:"30px",width:"320px"},attrs:{src:t.frequency,controls:"controls"}})])],1),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"素材编制人"}},[a("Input",{attrs:{value:t.historyData[t.compile].createUserName,disabled:""}})],1),t._v(" "),a("FormItem",{attrs:{label:"素材编制日期"}},[a("Input",{attrs:{value:t.createTime,disabled:""}})],1),t._v(" "),a("FormItem",{attrs:{label:"素材语音格式"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].fileFormat,callback:function(e){t.historyData[t.compile].fileFormat=e},expression:"historyData[compile].fileFormat"}},t._l(t.fileFormat,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"风格",prop:"ttsStyle"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].ttsStyle,callback:function(e){t.historyData[t.compile].ttsStyle=e},expression:"historyData[compile].ttsStyle"}},t._l(t.ttsStyle,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"前背景类型",prop:"fbGroundType"}},[a("Select",{attrs:{clearable:""},model:{value:t.historyData[t.compile].fbGroundType,callback:function(e){t.historyData[t.compile].fbGroundType=e},expression:"historyData[compile].fbGroundType"}},t._l(t.fbGroundType,function(e){return a("Option",{key:e.itemValue,attrs:{value:e.itemValue}},[t._v(t._s(e.itemName))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"素材大小"}},[a("Input",{attrs:{disabled:""},model:{value:t.historyData[t.compile].fileSize,callback:function(e){t.historyData[t.compile].fileSize=e},expression:"historyData[compile].fileSize"}})],1),t._v(" "),a("FormItem",{attrs:{label:"素材时长"}},[a("Span",{staticClass:"duration"},[t._v(t._s(t.historyData[t.compile].fileDuration))])],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"21"}},[a("audio-recorder",{attrs:{"upload-url":"some url",attempts:2,time:2,"show-upload-button":!1,"select-record":t.select_record,"mic-failed":t.mic_failed}})],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"22"}},[a("FormItem",{attrs:{label:"素材文本信息"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.historyData[t.compile].infoComment,callback:function(e){t.historyData[t.compile].infoComment=e},expression:"historyData[compile].infoComment"}})],1)],1)],1)],1):t._e(),t._v(" "),a("div",{slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updatePreserveSubmit()}}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updateHandleSubmit()}}},[t._v("提交审核")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.handleReset()}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=5.88b76f83a772eb72d5bb.js.map