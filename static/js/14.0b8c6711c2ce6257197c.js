webpackJsonp([14],{233:function(e,t,a){var l=a(0)(a(257),a(260),null,null,null);e.exports=l.exports},251:function(e,t,a){"use strict";function l(){var e=new Date;return new Date(e).getFullYear()+(new Date(e).getMonth()+1<10?"0"+(new Date(e).getMonth()+1):new Date(e).getMonth()+1)+(new Date(e).getDate()<10?"0"+new Date(e).getDate():new Date(e).getDate())+(new Date(e).getHours()<10?"0"+new Date(e).getHours():new Date(e).getHours())+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+(new Date(e).getSeconds()<10?"0"+new Date(e).getSeconds():new Date(e).getSeconds())}function o(e){return new Date(e).getFullYear()+"-"+(new Date(e).getMonth()+1<10?"0"+(new Date(e).getMonth()+1):new Date(e).getMonth()+1)+"-"+(new Date(e).getDate()<10?"0"+new Date(e).getDate():new Date(e).getDate())+" "+(new Date(e).getHours()<10?"0"+new Date(e).getHours():new Date(e).getHours())+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+":"+(new Date(e).getSeconds()<10?"0"+new Date(e).getSeconds():new Date(e).getSeconds())}function r(){return new Date(+new Date((new Date).toJSON())+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}function i(e){var e=e,t=new Date,a=t.getFullYear(),l=t.getMonth()+1,o=t.getDate(),r=t.getHours(),i=t.getMinutes(),n=t.getSeconds();return o<=e&&(l>1?l-=1:(a-=1,l=12)),t.setDate(t.getDate()-e),a=t.getFullYear(),l=t.getMonth()+1,o=t.getDate(),a+"-"+(l<10?"0"+l:l)+"-"+(o<10?"0"+o:o)+" "+(r<10?"0"+r:r)+":"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}function n(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;return a>1?a-=1:(t-=1,a=12),t+"-"+(a<10?"0"+a:a)+"-01 00:00:00"}function s(){return"2000-01-01 01:01:01"}t.d=l,t.c=o,t.b=r,t.f=i,t.a=n,t.e=s},257:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var l=a(251);t.default={name:"",props:{},data:function(){var e=this.$store.state.parameter.deserve;return{commitStatus:"",typeNo:e.M005,groupNo:e.M006,languageKbn:e.M007,fileFormat:e.M018,ttsLibrary:e.M013,ttsStyle:e.M015,ttsSpeed:e.M016,fbGroundType:e.M401,frequency:"",modal1:!1,accordion_value:"1",formValidate:{infoId:"",createUserName:"",commitStatus:"",fbGroundType:e.M401[0].itemValue,compileNodeId:"",compileNodeName:"",createUserId:"",fileDuration:"",fileFormat:e.M018[0].itemValue,fileSize:"",fileUrl:"",groupNo:e.M006[0].itemValue,infoComment:"",infoName:"",issueDate:"",issueNodelist:"",issueUserId:"",languageKbn:"",reviewDate:"",reviewInfo:"",reviewUserId:"",reviewUserName:"",ttsLibrary:e.M013[0].itemValue,ttsSpeed:e.M016[0].itemValue,ttsStyle:e.M015[0].itemValue,ttsText:"",typeNo:e.M005[0].itemValue},ruleValidate:{infoName:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],infoComment:[{required:!0,message:"The name cannot be empty",trigger:"blur"}]}}},methods:{handleUploadFile:function(t){this.uploadFiles="",this.uploadFiles=t,console.log(this.uploadFiles),this.fileSize=t.size/1024,this.fileSize<1024?this.fileSize=Math.floor(this.fileSize):alert("文件过大"),this.formValidate.fileSize=this.fileSize;var a=e("#musicPlayPanel");a.attr("src",URL.createObjectURL(this.uploadFiles)),a.get("0").load();var l=a;if(null!=l){l[0].load(),l[0].oncanplay=function(){e("#duration").html(Math.floor(l[0].duration))}}return!1},enhance:function(){this.formValidate.fileDuration=e("#duration").html(),this.formValidate.infoId="06ZZZZ01"+a.i(l.d)(),this.formValidate.createUserId="06ZZZZ01"+this.$store.state.user.uid,this.formValidate.createUserName=this.$store.state.user.name,this.formValidate.createTime=a.i(l.c)(new Date);var t=new FormData;for(var o in this.formValidate)t.append(o,this.formValidate[o]);t.append("materialfile",this.uploadFiles),this.$axios({method:"post",data:t,url:this.baseURL+"/material/MaterialInfo/add_Material",headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e),"200"==e.status&&alert("Success!")}).catch(function(e){})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.formValidate.reviewDate=a.i(l.c)(new Date),t.formValidate.commitStatus=2,t.enhance()):t.$Message.error("Fail!")})},preserveSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.formValidate.reviewDate=a.i(l.e)(),t.formValidate.commitStatus=1,t.enhance()):t.$Message.error("Fail!")})},time_to_sec:function(e){var t=e.split(":")[0],a=e.split(":")[1];return Number(60*t)+Number(a)},select_record:function(e){console.log(e),this.formValidate.fileSize=Math.ceil(e.blob.size/1024),this.formValidate.fileDuration=this.time_to_sec(e.duration),this.uploadFiles=new File([e.blob],{type:"audio/mp3"})},mic_failed:function(){alert("您的麦克风不起作用")},handleReset:function(e){this.$refs[e].resetFields()},ok:function(e){this.$Message.info("OK!")},cancel:function(e){this.$Message.info("Clicked cancel")}},created:function(){}}}.call(t,a(253))},260:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{staticStyle:{"z-index":"1021"},attrs:{title:"信息录入",styles:{top:"20px"},width:"1000"},on:{"on-ok":function(t){e.ok("formValidate")},"on-cancel":function(t){e.cancel("formValidate")}},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("Collapse",{attrs:{accordion:""},on:{"on-change":function(t){e.handleReset("formValidate")}},model:{value:e.accordion_value,callback:function(t){e.accordion_value=t},expression:"accordion_value"}},[a("Panel",{attrs:{name:"1"}},[e._v("\n         预录素材\n         "),a("div",{slot:"content"},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,"label-position":"right",rules:e.ruleValidate,"label-width":110}},[a("Row",{attrs:{getter:"40"}},[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"上传素材"}},[a("Upload",{attrs:{format:["mp3"],"before-upload":e.handleUploadFile,action:""}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline",accept:"audio/mp3"}},[e._v("选择文件")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"素材名称",prop:"infoName"}},[a("Input",{model:{value:e.formValidate.infoName,callback:function(t){e.formValidate.infoName=t},expression:"formValidate.infoName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"素材分类",prop:"typeNo"}},[a("Select",{attrs:{clearable:"",placeholder:"素材分类"},model:{value:e.formValidate.typeNo,callback:function(t){e.formValidate.typeNo=t},expression:"formValidate.typeNo"}},e._l(e.typeNo,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"素材分组",prop:"groupNo"}},[a("Select",{attrs:{clearable:"",placeholder:"素材分组"},model:{value:e.formValidate.groupNo,callback:function(t){e.formValidate.groupNo=t},expression:"formValidate.groupNo"}},e._l(e.groupNo,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"音库",prop:"ttsLibrary"}},[a("Select",{attrs:{clearable:"",placeholder:"音库"},model:{value:e.formValidate.ttsLibrary,callback:function(t){e.formValidate.ttsLibrary=t},expression:"formValidate.ttsLibrary"}},e._l(e.ttsLibrary,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"语速",prop:"ttsSpeed"}},[a("Select",{attrs:{clearable:"",placeholder:"语速"},model:{value:e.formValidate.ttsSpeed,callback:function(t){e.formValidate.ttsSpeed=t},expression:"formValidate.ttsSpeed"}},e._l(e.ttsSpeed,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1)],1),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"素材大小",prop:"fileSize"}},[a("Input",{attrs:{disabled:""},model:{value:e.formValidate.fileSize,callback:function(t){e.formValidate.fileSize=t},expression:"formValidate.fileSize"}})],1),e._v(" "),a("FormItem",{attrs:{label:"试听"}},[a("audio",{staticStyle:{height:"30px"},attrs:{controls:"",id:"musicPlayPanel"}},[a("source",{attrs:{type:"audio/mpeg"}})])]),e._v(" "),a("FormItem",{attrs:{label:"风格",prop:"ttsStyle"}},[a("Select",{attrs:{clearable:"",placeholder:"风格"},model:{value:e.formValidate.ttsStyle,callback:function(t){e.formValidate.ttsStyle=t},expression:"formValidate.ttsStyle"}},e._l(e.ttsStyle,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"前背景类型",prop:"fbGroundType"}},[a("Select",{attrs:{clearable:"",placeholder:"前背景类型"},model:{value:e.formValidate.fbGroundType,callback:function(t){e.formValidate.fbGroundType=t},expression:"formValidate.fbGroundType"}},e._l(e.fbGroundType,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"素材语音格式",prop:"fileFormat"}},[a("Select",{attrs:{clearable:"",placeholder:"素材语音格式"},model:{value:e.formValidate.fileFormat,callback:function(t){e.formValidate.fileFormat=t},expression:"formValidate.fileFormat"}},e._l(e.fileFormat,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{staticStyle:{display:"block"},attrs:{label:"素材时长"}},[a("span",{attrs:{id:"duration"}},[e._v(e._s(e.formValidate.fileDuration))])])],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"22"}},[a("FormItem",{attrs:{label:"素材文本信息",prop:"infoComment"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.formValidate.infoComment,callback:function(t){e.formValidate.infoComment=t},expression:"formValidate.infoComment"}})],1)],1)],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.preserveSubmit("formValidate")}}},[e._v("保存")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交审核")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("取消")])],1)],1)],1)]),e._v(" "),a("Panel",{attrs:{name:"2"}},[e._v("\n          实录素材\n         "),a("div",{slot:"content"},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,"label-position":"right",rules:e.ruleValidate,"label-width":110}},[a("Row",{attrs:{getter:"40"}},[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"素材名称",prop:"infoName"}},[a("Input",{model:{value:e.formValidate.infoName,callback:function(t){e.formValidate.infoName=t},expression:"formValidate.infoName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"素材分类",prop:"typeNo"}},[a("Select",{attrs:{clearable:"",placeholder:"素材分类"},model:{value:e.formValidate.typeNo,callback:function(t){e.formValidate.typeNo=t},expression:"formValidate.typeNo"}},e._l(e.typeNo,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"素材分组",prop:"groupNo"}},[a("Select",{attrs:{clearable:"",placeholder:"素材分组"},model:{value:e.formValidate.groupNo,callback:function(t){e.formValidate.groupNo=t},expression:"formValidate.groupNo"}},e._l(e.groupNo,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"音库",prop:"ttsLibrary"}},[a("Select",{attrs:{clearable:"",placeholder:"音库"},model:{value:e.formValidate.ttsLibrary,callback:function(t){e.formValidate.ttsLibrary=t},expression:"formValidate.ttsLibrary"}},e._l(e.ttsLibrary,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"语速",prop:"ttsSpeed"}},[a("Select",{attrs:{clearable:"",placeholder:"语速"},model:{value:e.formValidate.ttsSpeed,callback:function(t){e.formValidate.ttsSpeed=t},expression:"formValidate.ttsSpeed"}},e._l(e.ttsSpeed,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1)],1),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"素材大小",prop:"fileSize"}},[a("Input",{attrs:{disabled:""},model:{value:e.formValidate.fileSize,callback:function(t){e.formValidate.fileSize=t},expression:"formValidate.fileSize"}})],1),e._v(" "),a("FormItem",{attrs:{label:"风格",prop:"ttsStyle"}},[a("Select",{attrs:{clearable:"",placeholder:"风格"},model:{value:e.formValidate.ttsStyle,callback:function(t){e.formValidate.ttsStyle=t},expression:"formValidate.ttsStyle"}},e._l(e.ttsStyle,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"前背景类型",prop:"fbGroundType"}},[a("Select",{attrs:{clearable:"",placeholder:"前背景类型"},model:{value:e.formValidate.fbGroundType,callback:function(t){e.formValidate.fbGroundType=t},expression:"formValidate.fbGroundType"}},e._l(e.fbGroundType,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"素材语音格式",prop:"fileFormat"}},[a("Select",{attrs:{clearable:"",placeholder:"素材语音格式"},model:{value:e.formValidate.fileFormat,callback:function(t){e.formValidate.fileFormat=t},expression:"formValidate.fileFormat"}},e._l(e.fileFormat,function(t){return a("Option",{key:t.itemValue,attrs:{value:t.itemValue}},[e._v(e._s(t.itemName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"素材时长"}},[a("span",[e._v(e._s(e.formValidate.fileDuration))])])],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"21"}},[a("audio-recorder",{attrs:{"upload-url":"some url",attempts:2,time:2,"show-upload-button":!1,"select-record":e.select_record,"mic-failed":e.mic_failed}})],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"22"}},[a("FormItem",{attrs:{label:"素材文本信息",prop:"infoComment"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.formValidate.infoComment,callback:function(t){e.formValidate.infoComment=t},expression:"formValidate.infoComment"}})],1)],1)],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.preserveSubmit("formValidate")}}},[e._v("保存")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交审核")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("重置")])],1)],1)],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=14.0b8c6711c2ce6257197c.js.map